# 自動ボイス分割・命名ツール 仕様書

## 1. ツール概要
声優によるボイス収録を効率的に処理するためのツール。収録された複数台詞が入ったwavファイル群を、Excelで管理された台詞リストに基づき、自動で分割・命名して個別ファイルとして出力する。

## 2. 想定ユーザー
サウンドクリエーター、ボイス収録編集担当者

## 3. 主な機能
- 指定フォルダ内の複数wavファイルを一括で無音区間で分割
- Whisper音声認識で分割音声を台詞リストと照合
- 照合結果に基づき、自動でファイル名を命名して出力
- スレッショルド音量以下の音声は自動で破棄（ノイズ・ブレス除去）
- 同じセリフが複数存在する場合、自動でテイク番号を連番管理
- 一致しないセリフは「その他_001.wav」形式で保存

## 4. 入力ファイル
### 4.1 wavファイル
- 1ファイルに複数台詞が収録されている
- フォルダ単位で指定（例：./wav_raw）
- サンプリングレート：44.1kHz〜96kHz、ビット深度：16bit〜32bit（対応予定）

### 4.2 Excelファイル（CVリスト）
- セリフ一覧と命名情報が記載されている
- 最低限必要な列：
  - 台詞番号（例：001, 002）
  - 台詞内容（例：「よし、行くぞ！」）

### 4.3 ユーザーがツール内で指定する項目
- ファイル名共通部分（例：CV_01_OHMA_）
- Excelファイルの「台詞番号列」「台詞内容列」の起点セル（例：B3, C3）
- Whisperの言語指定（日本語 / 英語）

## 5. ファイル命名規則
```
[共通部分][台詞番号]_[テイク番号].wav
例：CV_01_OHMA_001_01.wav
```
- 共通部分：ツールで入力（例：CV_01_OHMA_）
- 台詞番号：Excelから取得
- テイク番号：同一セリフが複数検出された場合、_01, _02…と連番付与

## 6. 出力仕様
- 出力フォルダに、分割された各台詞がファイルとして保存される
- ファイルは.wav形式（入力と同一のビットレート・サンプリングレートを維持）
- 一致しない音声は "その他_001.wav", "その他_002.wav"... として保存

## 7. 省略・非搭載機能
- 音声再生機能
- 手動調整GUI
- スレッショルドによる長さ判定（音量ベースのみ）

## 8. 使用予定ライブラリ（Python）
- `pydub` または `librosa`：無音検出・分割
- `openpyxl`：Excel読み込み
- `whisper` または `faster-whisper`：音声認識
- `fuzzywuzzy` または `difflib`：セリフの近似一致

## 9. 将来的な拡張案（オプション）
- GUIによる手動再調整・聞き直し機能
- キャラ別に自動フォルダ振り分け
- プロジェクトファイル保存（設定の読み書き）

---
以上
